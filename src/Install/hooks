#!/usr/bin/env php
<?php

function findAutoload(string $startDir): ?string {
    $dir = $startDir;

    while ($dir !== '/') {
        $autoload = $dir . '/vendor/autoload.php';
        if (file_exists($autoload)) {
            return $autoload;
        }
        $dir = dirname($dir);
    }

    return null;
}

$autoloadPath = findAutoload(getcwd());

if (!$autoloadPath) {
    echo "❌ Could not find vendor/autoload.php\n";
    exit(1);
}

require $autoloadPath;

use Apex\Core\Install\DockerInstaller;

DockerInstaller::copyDockerCompose();
